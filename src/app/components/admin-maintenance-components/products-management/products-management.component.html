<app-admin-header></app-admin-header>

<div class="products-management-container">
  <div class="page-title">
    <h1>üç± Gerenciamento de Produtos</h1>
    <p class="subtitle">Gerencie os Produtos do sistema</p>
  </div>

  <!-- Estat√≠sticas -->
  <app-product-stats [stats]="stats" />

  <!-- Bot√£o de criar produto -->
  <div class="actions-container">
    <button class="create-button" (click)="openCreateModal()">‚ûï Criar Novo Produto</button>
  </div>

  <!-- Barra de Pesquisa -->
  <app-product-search-bar
    [(searchTerm)]="searchTerm"
    [filteredCount]="filteredProducts.length"
    [totalCount]="products.length"
  />

  <!-- Lista de produtos -->
  <app-product-list
    [products]="filteredProducts"
    [categories]="categories"
    [loading]="loading"
    [searchTerm]="searchTerm"
    [totalProducts]="products.length"
    (productEdit)="openEditModal($event)"
    (productDelete)="deleteProduct($event)"
    (productToggleAvailability)="toggleAvailability($event)"
  />

  <!-- Modal Unificado (new-item-modal) -->
  @if (showModal) {
    <app-item-editor-modal
      [mode]="'product'"
      [editMode]="modalEditMode"
      [itemToEdit]="modalItemToEdit"
      [productId]="currentProductId"
      (itemCreated)="onItemCreated($event)"
      (modalClosed)="closeModal()"
    ></app-item-editor-modal>
  }
</div>
